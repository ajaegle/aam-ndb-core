<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ndb-core documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ndb-core documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li>RollCallComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#styleData" role="tab" id="styleData-tab" data-toggle="tab" data-link="style">Styles</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts</code>
</p>

    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>Displays the given children one by one to the user to mark the attendance status for the given day and type.
This component itself handles the loading and saving of the attendances entities internally.</p>

    </p>


    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                    <code><a href="https://angular.io/api/core/OnInit" target="_blank" >OnInit</a></code>
    </p>


<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-roll-call</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./roll-call.component.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./roll-call.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#AttStatus">AttStatus</a>
                            </li>
                            <li>
                                <a href="#currentIndex">currentIndex</a>
                            </li>
                            <li>
                                <a href="#debugContent">debugContent</a>
                            </li>
                            <li>
                                <a href="#isLoading">isLoading</a>
                            </li>
                            <li>
                                <a href="#rollCallList">rollCallList</a>
                            </li>
                            <li>
                                <a href="#showDebug">showDebug</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#displayRecordForDebugging">displayRecordForDebugging</a>
                            </li>
                            <li>
                                <a href="#endRollCall">endRollCall</a>
                            </li>
                            <li>
                                <a href="#goToNextStudent">goToNextStudent</a>
                            </li>
                            <li>
                                <a href="#isFinished">isFinished</a>
                            </li>
                            <li>
                                <a href="#markAttendance">markAttendance</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Inputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#attendanceType">attendanceType</a>
                            </li>
                            <li>
                                <a href="#day">day</a>
                            </li>
                            <li>
                                <a href="#students">students</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Outputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#complete">complete</a>
                            </li>
                        </ul>
                    </td>
                </tr>



        </tbody>
    </table>
</section>

    <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(entityMapper: <a href="../injectables/EntityMapperService.html">EntityMapperService</a>, childrenService: <a href="../injectables/ChildrenService.html">ChildrenService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:56</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>entityMapper</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/EntityMapperService.html" target="_self" >EntityMapperService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>childrenService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ChildrenService.html" target="_self" >ChildrenService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

    <section>
    <h3 id="inputs">Inputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="attendanceType"></a>
                        <b>attendanceType</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:37</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The attendance type to be checked and saved (e.g. &#39;coaching&#39; or &#39;school&#39;)</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="day"></a>
                        <b>day</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:32</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The day for which attendance will be recorded</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="students"></a>
                        <b>students</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/Child.html" target="_self" >Child[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:42</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The children for whom attendance will be recorded</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>
    <section>
    <h3 id="outputs">Outputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="complete"></a>
                        <b>complete</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://angular.io/api/core/EventEmitter" target="_blank" >EventEmitter</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:47</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Event emitted when the roll call is finished (or aborted).</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>


    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="displayRecordForDebugging"></a>
                    <span class="name">
                        <b>
                            displayRecordForDebugging
                        </b>
                        <a href="#displayRecordForDebugging"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>displayRecordForDebugging(rollCallRecord: <a href="../interfaces/RollCallRecord.html">RollCallRecord</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="164"
                            class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:164</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>rollCallRecord</td>
                                    <td>
                                                <code><a href="../interfaces/RollCallRecord.html" target="_self" >RollCallRecord</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="endRollCall"></a>
                    <span class="name">
                        <b>
                            endRollCall
                        </b>
                        <a href="#endRollCall"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>endRollCall()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="156"
                            class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:156</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="goToNextStudent"></a>
                    <span class="name">
                        <b>
                            goToNextStudent
                        </b>
                        <a href="#goToNextStudent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>goToNextStudent(newIndex?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="146"
                            class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:146</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>newIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFinished"></a>
                    <span class="name">
                        <b>
                            isFinished
                        </b>
                        <a href="#isFinished"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isFinished()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="160"
                            class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:160</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="markAttendance"></a>
                    <span class="name">
                        <b>
                            markAttendance
                        </b>
                        <a href="#markAttendance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>markAttendance(status: <a href="../undefineds/AttendanceStatus.html">AttendanceStatus</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="138"
                            class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:138</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>status</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#AttendanceStatus" target="_self" >AttendanceStatus</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="AttStatus"></a>
                        <span class="name">
                            <b>
                            AttStatus</b>
                            <a href="#AttStatus"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>AttendanceStatus</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="53" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:53</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="currentIndex"></a>
                        <span class="name">
                            <b>
                            currentIndex</b>
                            <a href="#currentIndex"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:50</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="debugContent"></a>
                        <span class="name">
                            <b>
                            debugContent</b>
                            <a href="#debugContent"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:56</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isLoading"></a>
                        <span class="name">
                            <b>
                            isLoading</b>
                            <a href="#isLoading"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>true</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:49</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="rollCallList"></a>
                        <span class="name">
                            <b>
                            rollCallList</b>
                            <a href="#rollCallList"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/RollCallRecord.html" target="_self" >RollCallRecord[]</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:51</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="showDebug"></a>
                        <span class="name">
                            <b>
                            showDebug</b>
                            <a href="#showDebug"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>AppConfig.settings.debug</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="55" class="link-to-prism">src/app/child-dev-project/attendance/add-day-attendance/roll-call/roll-call.component.ts:55</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, EventEmitter, Input, OnInit, Output } from &quot;@angular/core&quot;;
import { AttendanceStatus } from &quot;../../model/attendance-day&quot;;
import { EntityMapperService } from &quot;../../../../core/entity/entity-mapper.service&quot;;
import { Child } from &quot;../../../children/model/child&quot;;
import { AttendanceMonth } from &quot;../../model/attendance-month&quot;;
import { ChildrenService } from &quot;../../../children/children.service&quot;;
import { RollCallRecord } from &quot;./roll-call-record&quot;;
import { animate, style, transition, trigger } from &quot;@angular/animations&quot;;
import { AppConfig } from &quot;../../../../core/app-config/app-config&quot;;

/**
 * Displays the given children one by one to the user to mark the attendance status for the given day and type.
 * This component itself handles the loading and saving of the attendances entities internally.
 */
@Component({
  selector: &quot;app-roll-call&quot;,
  templateUrl: &quot;./roll-call.component.html&quot;,
  styleUrls: [&quot;./roll-call.component.scss&quot;],
  animations: [
    trigger(&quot;completeRollCall&quot;, [
      transition(&quot;void &#x3D;&gt; *&quot;, [
        style({ backgroundColor: &quot;white&quot; }),
        animate(1000),
      ]),
    ]),
  ],
})
export class RollCallComponent implements OnInit {
  /**
   * The day for which attendance will be recorded
   */
  @Input() day: Date;

  /**
   * The attendance type to be checked and saved (e.g. &#x27;coaching&#x27; or &#x27;school&#x27;)
   */
  @Input() attendanceType: string;

  /**
   * The children for whom attendance will be recorded
   */
  @Input() students: Child[] &#x3D; [];

  /**
   * Event emitted when the roll call is finished (or aborted).
   */
  @Output() complete &#x3D; new EventEmitter();

  isLoading: boolean &#x3D; true;
  currentIndex: number;
  rollCallList: RollCallRecord[] &#x3D; [];

  AttStatus &#x3D; AttendanceStatus;

  showDebug &#x3D; AppConfig.settings.debug;
  debugContent: any;

  constructor(
    private entityMapper: EntityMapperService,
    private childrenService: ChildrenService
  ) {}

  async ngOnInit() {
    await this.loadList();
  }

  private async loadList() {
    this.isLoading &#x3D; true;

    this.rollCallList &#x3D; await this.loadMonthAttendanceRecords(this.students);
    this.sortRollCallList();

    this.goToNextStudent(0);

    this.isLoading &#x3D; false;
  }

  private async loadMonthAttendanceRecords(
    children: Child[]
  ): Promise&lt;RollCallRecord[]&gt; {
    const rollCallRecords: RollCallRecord[] &#x3D; [];

    const attendances &#x3D; await this.childrenService
      .getAttendancesOfMonth(this.day)
      .toPromise();
    children.forEach((child) &#x3D;&gt; {
      let attMonth: AttendanceMonth &#x3D; attendances.find(
        (a) &#x3D;&gt;
          a.student &#x3D;&#x3D;&#x3D; child.getId() &amp;&amp; a.institution &#x3D;&#x3D;&#x3D; this.attendanceType
      );
      if (attMonth &#x3D;&#x3D;&#x3D; undefined) {
        attMonth &#x3D; AttendanceMonth.createAttendanceMonth(
          child.getId(),
          this.attendanceType
        );
        attMonth.month &#x3D; new Date(this.day.getTime());
      }

      const attDay &#x3D; attMonth.dailyRegister.find(
        (d) &#x3D;&gt;
          d.date.getDate() &#x3D;&#x3D;&#x3D; this.day.getDate() &amp;&amp;
          d.date.getMonth() &#x3D;&#x3D;&#x3D; this.day.getMonth() &amp;&amp;
          d.date.getFullYear() &#x3D;&#x3D;&#x3D; this.day.getFullYear()
      );

      rollCallRecords.push({
        child: child,
        attendanceMonth: attMonth,
        attendanceDay: attDay,
      });
    });

    return rollCallRecords;
  }

  private sortRollCallList() {
    this.rollCallList.sort((a: RollCallRecord, b: RollCallRecord) &#x3D;&gt; {
      if (a.child.schoolClass &#x3D;&#x3D;&#x3D; b.child.schoolClass) {
        return 0;
      }

      const diff &#x3D;
        parseInt(a.child.schoolClass, 10) - parseInt(b.child.schoolClass, 10);
      if (!Number.isNaN(diff)) {
        return diff;
      }

      if (
        a.child.schoolClass &lt; b.child.schoolClass ||
        b.child.schoolClass &#x3D;&#x3D;&#x3D; undefined
      ) {
        return -1;
      }
      return 1;
    });
  }

  markAttendance(status: AttendanceStatus) {
    const rollCallListEntry &#x3D; this.rollCallList[this.currentIndex];
    rollCallListEntry.attendanceDay.status &#x3D; status;
    this.entityMapper.save(rollCallListEntry.attendanceMonth);

    setTimeout(() &#x3D;&gt; this.goToNextStudent(), 750);
  }

  goToNextStudent(newIndex?: number) {
    if (newIndex !&#x3D;&#x3D; undefined) {
      this.currentIndex &#x3D; newIndex;
    } else {
      this.currentIndex++;
    }

    this.displayRecordForDebugging(this.rollCallList[this.currentIndex]);
  }

  endRollCall() {
    this.complete.emit();
  }

  isFinished(): boolean {
    return this.currentIndex &gt;&#x3D; this.rollCallList.length;
  }

  displayRecordForDebugging(rollCallRecord: RollCallRecord) {
    if (!rollCallRecord) {
      return;
    }

    console.log(rollCallRecord);
    this.debugContent &#x3D; JSON.stringify(rollCallRecord.attendanceDay, null, 2);
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div *ngIf&#x3D;&#x27;isLoading&#x27;&gt;
  &lt;mat-progress-bar mode&#x3D;&quot;indeterminate&quot;&gt;&lt;/mat-progress-bar&gt;
  &lt;div&gt;Loading attendance list ...&lt;/div&gt;
&lt;/div&gt;

&lt;div *ngIf&#x3D;&#x27;!isLoading&#x27;&gt;

  &lt;!-- Individual Student&#x27;s Page --&gt;
  &lt;div *ngFor&#x3D;&#x27;let entry of rollCallList; let i &#x3D; index&#x27; [ngClass]&#x3D;&#x27;{&quot;hidden&quot;: (currentIndex!&#x3D;&#x3D;i)}&#x27;&gt;
    &lt;app-child-block [entity]&#x3D;&#x27;entry.child&#x27;&gt;&lt;/app-child-block&gt;

    &lt;div fxLayout&#x3D;&#x27;column&#x27; fxLayoutAlign&#x3D;&#x27;space-between stretch&#x27; class&#x3D;&#x27;options-wrapper&#x27;&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.PRESENT)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-P&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.PRESENT}&quot;&gt;
        &lt;span class&#x3D;&#x27;fa fa-check&#x27; *ngIf&#x3D;&#x27;entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.PRESENT&#x27;&gt;&lt;/span&gt;
        Present
      &lt;/div&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.ABSENT)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-A&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.ABSENT}&quot;&gt;
        &lt;span class&#x3D;&#x27;fa fa-check&#x27; *ngIf&#x3D;&#x27;entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.ABSENT&#x27;&gt;&lt;/span&gt;
        Absent
      &lt;/div&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.LATE)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-L&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.LATE}&quot;&gt;
        &lt;span class&#x3D;&#x27;fa fa-check&#x27; *ngIf&#x3D;&#x27;entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.LATE&#x27;&gt;&lt;/span&gt;
        Late
      &lt;/div&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.HOLIDAY)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-H&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.HOLIDAY}&quot;&gt;
        &lt;span class&#x3D;&#x27;fa fa-check&#x27; *ngIf&#x3D;&#x27;entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.HOLIDAY&#x27;&gt;&lt;/span&gt;
        Holiday
      &lt;/div&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.EXCUSED)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-E&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.EXCUSED}&quot;&gt;
        &lt;span class&#x3D;&#x27;fa fa-check&#x27; *ngIf&#x3D;&#x27;entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.EXCUSED&#x27;&gt;&lt;/span&gt;
        Excused
      &lt;/div&gt;
      &lt;div class&#x3D;&#x27;group-select-option&#x27;
           (click)&#x3D;&#x27;markAttendance(AttStatus.UNKNOWN)&#x27;
           [ngClass]&#x3D;&quot;{&#x27;attendance-U&#x27;: entry.attendanceDay.status&#x3D;&#x3D;&#x3D;AttStatus.UNKNOWN}&quot;&gt;
        Skip
      &lt;/div&gt;
    &lt;/div&gt;

  &lt;/div&gt;


  &lt;!-- Completion Page --&gt;
  &lt;div *ngIf&#x3D;&#x27;isFinished()&#x27; class&#x3D;&#x27;roll-call-complete&#x27; [@completeRollCall]&gt;
    &lt;span class&#x3D;&#x27;fa fa-check-circle-o roll-call-complete-icon&#x27;&gt;&lt;/span&gt;&lt;br&gt;
    Roll call completed.
  &lt;/div&gt;


  &lt;!-- Control Buttons --&gt;
  &lt;div&gt;
    &lt;button mat-stroked-button [disabled]&#x3D;&#x27;currentIndex &lt; 1&#x27; (click)&#x3D;&#x27;currentIndex &#x3D; currentIndex - 1&#x27;
            class&#x3D;&#x27;nav-button&#x27; fxFlex&gt;
      Back
    &lt;/button&gt;

    &lt;button mat-stroked-button *ngIf&#x3D;&#x27;!isFinished()&#x27; (click)&#x3D;&#x27;endRollCall()&#x27; class&#x3D;&#x27;nav-button&#x27; fxFlex&gt;
      Abort
    &lt;/button&gt;

    &lt;button mat-stroked-button *ngIf&#x3D;&#x27;isFinished()&#x27; (click)&#x3D;&#x27;endRollCall()&#x27; class&#x3D;&#x27;nav-button&#x27; fxFlex&gt;
      &lt;b&gt;Finish&lt;/b&gt;
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;!-- Additional information for debugging issues --&gt;
  &lt;mat-card *ngIf&#x3D;&#x27;showDebug&#x27;&gt;
    &lt;mat-card-title&gt;Debugging Information&lt;/mat-card-title&gt;
    &lt;mat-card-content&gt;
      &lt;p&gt;Day: &lt;em&gt;{{day}}&lt;/em&gt;&lt;/p&gt;
      &lt;p&gt;Current Record: &lt;em&gt;{{debugContent}}&lt;/em&gt;&lt;/p&gt;
    &lt;/mat-card-content&gt;
  &lt;/mat-card&gt;

&lt;/div&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-styleData">
                <p class="comment">
                    <code>./roll-call.component.scss</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">
.group-select-option {
  width: 100%;
  padding: 16px;
  cursor: pointer;
  box-sizing: border-box;
  border: 1px solid;
  border-top: 0;
}

.group-select-option:first-child {
  border-top: 1px solid;
}

.options-wrapper {
  margin-top: 16px;
}

.hidden {
  display: none;
}

.nav-button {
  margin: 10px;
  flex: none;
}

.roll-call-complete {
  text-align: center;
  line-height: 2em;

  padding: 20px 0;

  background-color: #C8E6C9;
  border-radius: 5px;
}
.roll-call-complete-icon {
  font-size: 40px;
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div *ngIf=\'isLoading\'>  <mat-progress-bar mode="indeterminate"></mat-progress-bar>  <div>Loading attendance list ...</div></div><div *ngIf=\'!isLoading\'>  <!-- Individual Student\'s Page -->  <div *ngFor=\'let entry of rollCallList; let i = index\' [ngClass]=\'{"hidden": (currentIndex!==i)}\'>    <app-child-block [entity]=\'entry.child\'></app-child-block>    <div fxLayout=\'column\' fxLayoutAlign=\'space-between stretch\' class=\'options-wrapper\'>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.PRESENT)\'           [ngClass]="{\'attendance-P\': entry.attendanceDay.status===AttStatus.PRESENT}">        <span class=\'fa fa-check\' *ngIf=\'entry.attendanceDay.status===AttStatus.PRESENT\'></span>        Present      </div>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.ABSENT)\'           [ngClass]="{\'attendance-A\': entry.attendanceDay.status===AttStatus.ABSENT}">        <span class=\'fa fa-check\' *ngIf=\'entry.attendanceDay.status===AttStatus.ABSENT\'></span>        Absent      </div>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.LATE)\'           [ngClass]="{\'attendance-L\': entry.attendanceDay.status===AttStatus.LATE}">        <span class=\'fa fa-check\' *ngIf=\'entry.attendanceDay.status===AttStatus.LATE\'></span>        Late      </div>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.HOLIDAY)\'           [ngClass]="{\'attendance-H\': entry.attendanceDay.status===AttStatus.HOLIDAY}">        <span class=\'fa fa-check\' *ngIf=\'entry.attendanceDay.status===AttStatus.HOLIDAY\'></span>        Holiday      </div>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.EXCUSED)\'           [ngClass]="{\'attendance-E\': entry.attendanceDay.status===AttStatus.EXCUSED}">        <span class=\'fa fa-check\' *ngIf=\'entry.attendanceDay.status===AttStatus.EXCUSED\'></span>        Excused      </div>      <div class=\'group-select-option\'           (click)=\'markAttendance(AttStatus.UNKNOWN)\'           [ngClass]="{\'attendance-U\': entry.attendanceDay.status===AttStatus.UNKNOWN}">        Skip      </div>    </div>  </div>  <!-- Completion Page -->  <div *ngIf=\'isFinished()\' class=\'roll-call-complete\' [@completeRollCall]>    <span class=\'fa fa-check-circle-o roll-call-complete-icon\'></span><br>    Roll call completed.  </div>  <!-- Control Buttons -->  <div>    <button mat-stroked-button [disabled]=\'currentIndex < 1\' (click)=\'currentIndex = currentIndex - 1\'            class=\'nav-button\' fxFlex>      Back    </button>    <button mat-stroked-button *ngIf=\'!isFinished()\' (click)=\'endRollCall()\' class=\'nav-button\' fxFlex>      Abort    </button>    <button mat-stroked-button *ngIf=\'isFinished()\' (click)=\'endRollCall()\' class=\'nav-button\' fxFlex>      <b>Finish</b>    </button>  </div>  <!-- Additional information for debugging issues -->  <mat-card *ngIf=\'showDebug\'>    <mat-card-title>Debugging Information</mat-card-title>    <mat-card-content>      <p>Day: <em>{{day}}</em></p>      <p>Current Record: <em>{{debugContent}}</em></p>    </mat-card-content>  </mat-card></div></div>'
    var COMPONENTS = [{'name': 'AddDayAttendanceComponent', 'selector': 'app-add-day-attendance'},{'name': 'AddMonthAttendanceComponent', 'selector': 'app-add-month-attendance'},{'name': 'AdminComponent', 'selector': 'app-admin'},{'name': 'AlertComponent', 'selector': ''},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'AppVersionComponent', 'selector': 'app-version'},{'name': 'AserComponent', 'selector': 'app-aser'},{'name': 'AttendanceAnalysisComponent', 'selector': 'app-attendance-analysis'},{'name': 'AttendanceAverageDashboardComponent', 'selector': 'app-attendance-average-dashboard'},{'name': 'AttendanceBlockComponent', 'selector': 'app-attendance-block'},{'name': 'AttendanceDayBlockComponent', 'selector': 'app-attendance-day-block]'},{'name': 'AttendanceDaysComponent', 'selector': 'app-attendance-days'},{'name': 'AttendanceDetailsComponent', 'selector': 'app-attendance-details'},{'name': 'AttendanceManagerComponent', 'selector': 'app-attendance-manager'},{'name': 'AttendanceWarningsDashboardComponent', 'selector': 'app-attendance-warnings-dashboard'},{'name': 'AttendanceWeekDashboardComponent', 'selector': 'app-attendance-week-dashboard'},{'name': 'BackgroundProcessingIndicatorComponent', 'selector': 'app-background-processing-indicator'},{'name': 'ChangelogComponent', 'selector': ''},{'name': 'ChildAttendanceComponent', 'selector': 'app-child-attendance'},{'name': 'ChildBlockComponent', 'selector': 'app-child-block'},{'name': 'ChildDetailsComponent', 'selector': 'app-child-details'},{'name': 'ChildMeetingNoteAttendanceComponent', 'selector': 'app-child-meeting-note-attendance'},{'name': 'ChildrenCountDashboardComponent', 'selector': 'app-children-count-dashboard'},{'name': 'ChildrenListComponent', 'selector': 'app-children-list'},{'name': 'ChildSelectComponent', 'selector': 'app-child-select'},{'name': 'CloudFileServiceUserSettingsComponent', 'selector': 'app-cloud-file-service-user-settings'},{'name': 'CompareRevComponent', 'selector': 'app-compare-rev'},{'name': 'ConfirmationDialogComponent', 'selector': 'app-confirmation-dialog'},{'name': 'ConflictResolutionListComponent', 'selector': 'app-conflict-resolution-list'},{'name': 'DashboardComponent', 'selector': 'app-dashboard'},{'name': 'DemoDataGeneratingProgressDialogComponent', 'selector': ''},{'name': 'EducationalMaterialComponent', 'selector': 'app-educational-material'},{'name': 'EntitySubrecordComponent', 'selector': 'app-entity-subrecord'},{'name': 'ExportDataComponent', 'selector': 'app-export-data'},{'name': 'FormDialogWrapperComponent', 'selector': 'app-form-dialog-wrapper'},{'name': 'HealthCheckupComponent', 'selector': 'app-health-checkup'},{'name': 'HowToComponent', 'selector': 'app-help'},{'name': 'InitialSyncDialogComponent', 'selector': ''},{'name': 'LoginComponent', 'selector': 'app-login'},{'name': 'NavigationComponent', 'selector': 'app-navigation'},{'name': 'NoRecentNotesDashboardComponent', 'selector': 'app-no-recent-notes-dashboard'},{'name': 'NoteDetailsComponent', 'selector': 'app-note-details'},{'name': 'NotePresenceListComponent', 'selector': 'app-note-presence-list'},{'name': 'NotesManagerComponent', 'selector': 'app-notes-manager'},{'name': 'NotesOfChildComponent', 'selector': 'app-notes-of-child'},{'name': 'PreviousSchoolsComponent', 'selector': 'app-previous-schools'},{'name': 'PrimaryActionComponent', 'selector': 'app-primary-action'},{'name': 'ProgressDashboardComponent', 'selector': 'app-progress-dashboard'},{'name': 'RecentNotesDashboardComponent', 'selector': 'app-recent-notes-dashboard'},{'name': 'RollCallComponent', 'selector': 'app-roll-call'},{'name': 'SchoolBlockComponent', 'selector': 'app-school-block'},{'name': 'SchoolDetailsComponent', 'selector': 'app-school-details'},{'name': 'SchoolsListComponent', 'selector': 'app-schools-list'},{'name': 'SearchComponent', 'selector': 'app-search'},{'name': 'SelectGroupChildrenComponent', 'selector': 'app-select-group-children'},{'name': 'SyncStatusComponent', 'selector': 'app-sync-status'},{'name': 'UiComponent', 'selector': 'app-ui'},{'name': 'UserAccountComponent', 'selector': 'app-user-account'},{'name': 'UserListComponent', 'selector': 'app-user-list'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'RollCallComponent'};
</script>
<script src="../js/tree.js"></script>










                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'RollCallComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
